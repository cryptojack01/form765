# I-765 移民表格自动化工具

一个专门为中文用户和律师事务所开发的离线移民表格自动化工具，支持自动填写复杂的 USCIS 移民表格（I-765、I-589、I-129、I-485、G-28、I-130、N-400 等）。

## 功能特点

- ✅ **完全离线运行** - 无需联网，保护隐私
- ✅ **双语界面** - 完整的中英文界面和错误提示
- ✅ **数据与表单分离** - 一次输入，自动映射到多个表格
- ✅ **实时验证** - 即时输入验证，防止常见错误
- ✅ **设备自适应** - 自动检测PC/移动设备并跳转
- ✅ **数据持久化** - 使用localStorage保存数据
- ✅ **PDF生成** - 生成可编辑和定稿两种版本的PDF

## 项目结构

```
form/
├── index.html              # 主入口，设备检测和路由
├── device-detector.js      # 设备检测逻辑
├── manifest.json           # PWA清单
├── service-worker.js       # 离线支持
├── core/                   # 核心模块
│   ├── data-models.js     # 申请人档案数据模型
│   ├── localization.js    # 双语翻译系统
│   ├── validators.js      # 验证规则引擎
│   ├── field-mapper.js    # 字段映射引擎
│   ├── pdf-processor.js   # PDF处理
│   └── i765-config.json   # I-765字段配置
├── pc/                    # PC版本
│   ├── index.html
│   ├── styles.css
│   ├── app.js
│   └── form-wizard.js
└── mobile/                 # 移动版本
    ├── index.html
    ├── styles.css
    └── app.js
```

## 使用方法

### 1. 直接打开（推荐）

1. 双击 `index.html` 文件
2. 系统会自动检测您的设备类型（PC或移动设备）
3. 自动跳转到相应的版本

### 2. 本地服务器（可选）

如果需要使用完整功能（如PDF生成），可以使用本地服务器：

```bash
# Python 3
python -m http.server 8000

# Node.js (需要安装 http-server)
npx http-server

# 然后访问 http://localhost:8000
```

## 功能说明

### 数据模型

系统使用 `ApplicantProfile` 类来管理申请人数据，包含：
- 个人信息（姓名、出生日期、联系方式等）
- 移民详情（A号码、I-94、当前身份等）
- 资格信息（EAD类别、申请原因等）
- 就业信息
- 支付信息

### 字段映射

系统通过 `FieldMapper` 将申请人档案数据映射到PDF表单字段，确保：
- 数据一致性
- 格式正确性
- 字段完整性

### 验证引擎

`FormValidator` 提供实时验证：
- 必填字段检查
- 格式验证（日期、邮箱、电话等）
- 自定义规则验证
- 双语错误提示

### PDF处理

`PDFProcessor` 支持：
- 加载PDF模板
- 填充表单字段
- 生成可编辑版本
- 生成扁平化（定稿）版本
- 下载PDF文件

## 技术栈

- **HTML5/CSS3** - 响应式UI设计
- **Vanilla JavaScript (ES6+)** - 无框架依赖
- **localStorage** - 本地数据持久化
- **pdf-lib** - PDF处理（通过CDN加载）

## 浏览器兼容性

- Chrome/Edge (推荐)
- Firefox
- Safari
- 移动浏览器（iOS Safari, Chrome Mobile）

## 注意事项

1. **PDF模板**：需要将 `i-765.pdf` 放在项目根目录
2. **离线使用**：首次使用需要联网加载pdf-lib库，之后可离线使用
3. **数据安全**：所有数据存储在浏览器localStorage中，不会上传到服务器
4. **浏览器要求**：需要支持ES6+的现代浏览器

## 开发计划

### 第一阶段（已完成）
- ✅ I-765完整流程
- ✅ 申请人档案数据模型
- ✅ 字段映射引擎
- ✅ 实时验证
- ✅ 双语界面
- ✅ PC和移动版本

### 第二阶段（计划中）
- ⏳ I-485 绿卡调整身份
- ⏳ I-589 政治庇护申请
- ⏳ N-400 入籍申请
- ⏳ PWA完整支持

### 第三阶段（计划中）
- ⏳ 批量数据导入导出
- ⏳ 用户权限管理
- ⏳ 审计日志
- ⏳ 数据加密

## 许可证

本项目仅供学习和研究使用。

## 支持

如有问题或建议，请联系开发团队。

---

**最后更新**: 2025-12-09
